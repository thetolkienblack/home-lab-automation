# Generated by Ansible - elk_stack role
# ======================== Kibana Configuration ===============================

# ---------------------------------- Server ------------------------------------
server.host: "{{ kibana_server_host }}"
server.port: {{ kibana_server_port }}
server.name: "{{ kibana_server_name }}"

# ---------------------------------- Paths -------------------------------------
path.data: {{ kibana_data_dir }}

# ---------------------------------- Logging -----------------------------------
logging:
  appenders:
    file:
      type: file
      fileName: {{ kibana_log_dir }}/kibana.log
      layout:
        type: json
  root:
    appenders: [default, file]
    level: info

# ------------------------------- Elasticsearch --------------------------------
elasticsearch.hosts: {{ kibana_elasticsearch_hosts | to_json }}

{% if elk_security_enabled %}
elasticsearch.username: "{{ kibana_elasticsearch_username }}"
elasticsearch.password: "{{ kibana_elasticsearch_password }}"
{% endif %}

# ---------------------------------- Security ----------------------------------
{% if elk_security_enabled %}
xpack.security.enabled: true
xpack.security.encryptionKey: "{{ lookup('password', '/dev/null length=32 chars=ascii_letters,digits') }}"
{% else %}
xpack.security.enabled: false
{% endif %}

# --------------------------------- Monitoring ---------------------------------
monitoring.ui.ccs.enabled: false

# ---------------------------------- Various -----------------------------------
telemetry.enabled: false
telemetry.optIn: false

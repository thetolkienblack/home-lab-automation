{{ '{{' }} define "__alertmanager" {{ '}}' }}AlertManager{{ '{{' }} end {{ '}}' }}
{{ '{{' }} define "__alertmanagerURL" {{ '}}' }}{{ '{{' }} .ExternalURL {{ '}}' }}/#/alerts?receiver={{ '{{' }} .Receiver {{ '}}' }}{{ '{{' }} end {{ '}}' }}

{{ '{{' }} define "__subject" {{ '}}' }}[{{ '{{' }} .Status | toUpper {{ '}}' }}{{ '{{' }} if eq .Status "firing" {{ '}}' }}:{{ '{{' }} .Alerts.Firing | len {{ '}}' }}{{ '{{' }} end {{ '}}' }}] {{ '{{' }} .GroupLabels.SortedPairs.Values | join " " {{ '}}' }} {{ '{{' }} if gt (len .CommonLabels) (len .GroupLabels) {{ '}}' }}({{ '{{' }} with .CommonLabels.Remove .GroupLabels.Names {{ '}}' }}{{ '{{' }} .Values | join " " {{ '}}' }}{{ '{{' }} end {{ '}}' }}){{ '{{' }} end {{ '}}' }}{{ '{{' }} end {{ '}}' }}

{{ '{{' }} define "__description" {{ '}}' }}{{ '{{' }} end {{ '}}' }}

{{ '{{' }} define "__text_alert_list" {{ '}}' }}{{ '{{' }} range . {{ '}}' }}
Labels:
{{ '{{' }} range .Labels.SortedPairs {{ '}}' }} - {{ '{{' }} .Name {{ '}}' }} = {{ '{{' }} .Value {{ '}}' }}
{{ '{{' }} end {{ '}}' }}Annotations:
{{ '{{' }} range .Annotations.SortedPairs {{ '}}' }} - {{ '{{' }} .Name {{ '}}' }} = {{ '{{' }} .Value {{ '}}' }}
{{ '{{' }} end {{ '}}' }}Source: {{ '{{' }} .GeneratorURL {{ '}}' }}
{{ '{{' }} end {{ '}}' }}{{ '{{' }} end {{ '}}' }}

{{ '{{' }} define "slack.default.title" {{ '}}' }}{{ '{{' }} template "__subject" . {{ '}}' }}{{ '{{' }} end {{ '}}' }}
{{ '{{' }} define "slack.default.username" {{ '}}' }}{{ '{{' }} template "__alertmanager" . {{ '}}' }}{{ '{{' }} end {{ '}}' }}
{{ '{{' }} define "slack.default.fallback" {{ '}}' }}{{ '{{' }} template "slack.default.title" . {{ '}}' }} | {{ '{{' }} template "slack.default.titlelink" . {{ '}}' }}{{ '{{' }} end {{ '}}' }}
{{ '{{' }} define "slack.default.pretext" {{ '}}' }}{{ '{{' }} end {{ '}}' }}
{{ '{{' }} define "slack.default.titlelink" {{ '}}' }}{{ '{{' }} template "__alertmanagerURL" . {{ '}}' }}{{ '{{' }} end {{ '}}' }}
{{ '{{' }} define "slack.default.iconemoji" {{ '}}' }}{{ '{{' }} end {{ '}}' }}
{{ '{{' }} define "slack.default.iconurl" {{ '}}' }}{{ '{{' }} end {{ '}}' }}
{{ '{{' }} define "slack.default.text" {{ '}}' }}{{ '{{' }} end {{ '}}' }}

{{ '{{' }} define "email.default.subject" {{ '}}' }}{{ '{{' }} template "__subject" . {{ '}}' }}{{ '{{' }} end {{ '}}' }}
{{ '{{' }} define "email.default.html" {{ '}}' }}
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta name="viewport" content="width=device-width" />
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>{{ '{{' }} template "email.default.subject" . {{ '}}' }}</title>
  <style>
    * { margin: 0; padding: 0; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; box-sizing: border-box; font-size: 14px; }
    img { max-width: 100%; }
    body { -webkit-font-smoothing: antialiased; -webkit-text-size-adjust: none; width: 100% !important; height: 100%; line-height: 1.6em; background-color: #f6f6f6; }
    table td { vertical-align: top; }
    body { background-color: #f6f6f6; }
    .body-wrap { background-color: #f6f6f6; width: 100%; }
    .container { display: block !important; max-width: 600px !important; margin: 0 auto !important; clear: both !important; }
    .content { max-width: 600px; margin: 0 auto; display: block; padding: 20px; }
    .main { background-color: #fff; border: 1px solid #e9e9e9; border-radius: 3px; }
    .content-wrap { padding: 20px; }
    .content-block { padding: 0 0 20px; }
    .header { width: 100%; margin-bottom: 20px; }
    .footer { width: 100%; clear: both; color: #999; padding: 20px; }
    .footer p, .footer a, .footer td { color: #999; font-size: 12px; }
    h1, h2, h3 { font-family: "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; color: #000; margin: 40px 0 0; line-height: 1.2em; font-weight: 400; }
    h1 { font-size: 32px; font-weight: 500; }
    h2 { font-size: 24px; }
    h3 { font-size: 18px; }
    h4 { font-size: 14px; font-weight: 600; }
    p, ul, ol { margin-bottom: 10px; font-weight: normal; }
    p li, ul li, ol li { margin-left: 5px; list-style-position: inside; }
    a { color: #348eda; text-decoration: underline; }
    .btn-primary { text-decoration: none; color: #FFF; background-color: #348eda; border: solid #348eda; border-width: 10px 20px; line-height: 2em; font-weight: bold; text-align: center; cursor: pointer; display: inline-block; border-radius: 5px; text-transform: capitalize; }
    .last { margin-bottom: 0; }
    .first { margin-top: 0; }
    .aligncenter { text-align: center; }
    .alignright { text-align: right; }
    .alignleft { text-align: left; }
    .clear { clear: both; }
    .alert { font-size: 16px; color: #fff; font-weight: 500; padding: 20px; text-align: center; border-radius: 3px 3px 0 0; }
    .alert.alert-warning { background-color: #f0ad4e; }
    .alert.alert-danger { background-color: #d9534f; }
    .alert.alert-success { background-color: #5cb85c; }
    .alert.alert-info { background-color: #5bc0de; }
    hr { border: 1px solid #e9e9e9; margin: 20px 0; }
  </style>
</head>

<body>
<table class="body-wrap">
  <tr>
    <td></td>
    <td class="container" width="600">
      <div class="content">
        <table class="main" width="100%" cellpadding="0" cellspacing="0">
          <tr>
            <td class="content-wrap">
              <table width="100%" cellpadding="0" cellspacing="0">
                <tr>
                  <td class="content-block">
                    <div class="alert alert-{{ '{{' }} if eq .Status "firing" {{ '}}' }}danger{{ '{{' }} else {{ '}}' }}success{{ '{{' }} end {{ '}}' }}">
                      {{ '{{' }} if eq .Status "firing" {{ '}}' }}[FIRING]{{ '{{' }} else {{ '}}' }}[RESOLVED]{{ '{{' }} end {{ '}}' }}
                    </div>
                  </td>
                </tr>
                {{ '{{' }} range .Alerts {{ '}}' }}
                <tr>
                  <td class="content-block">
                    <h2>{{ '{{' }} .Labels.alertname {{ '}}' }}</h2>
                    <p><strong>Summary:</strong> {{ '{{' }} .Annotations.summary {{ '}}' }}</p>
                    <p><strong>Description:</strong> {{ '{{' }} .Annotations.description {{ '}}' }}</p>
                    <hr />
                    <h4>Labels:</h4>
                    <ul>
                      {{ '{{' }} range .Labels.SortedPairs {{ '}}' }}
                      <li><strong>{{ '{{' }} .Name {{ '}}' }}:</strong> {{ '{{' }} .Value {{ '}}' }}</li>
                      {{ '{{' }} end {{ '}}' }}
                    </ul>
                    <p><a href="{{ '{{' }} .GeneratorURL {{ '}}' }}" class="btn-primary">View in Prometheus</a></p>
                  </td>
                </tr>
                {{ '{{' }} end {{ '}}' }}
              </table>
            </td>
          </tr>
        </table>
        <div class="footer">
          <table width="100%">
            <tr>
              <td class="aligncenter content-block">Sent from <a href="{{ '{{' }} .ExternalURL {{ '}}' }}">Alertmanager</a></td>
            </tr>
          </table>
        </div>
      </div>
    </td>
    <td></td>
  </tr>
</table>
</body>
</html>
{{ '{{' }} end {{ '}}' }}

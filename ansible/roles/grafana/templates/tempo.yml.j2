# Tempo configuration file
# Generated by Ansible

server:
  http_listen_address: {{ tempo_http_listen_address }}
  http_listen_port: {{ tempo_http_listen_port }}
  grpc_listen_port: {{ tempo_grpc_listen_port }}
  log_level: info

distributor:
  receivers:
{% if tempo_receivers_otlp_grpc_enabled %}
    otlp:
      protocols:
        grpc:
          endpoint: {{ tempo_receivers_otlp_grpc_endpoint }}
{% endif %}
{% if tempo_receivers_otlp_http_enabled %}
        http:
          endpoint: {{ tempo_receivers_otlp_http_endpoint }}
{% endif %}
{% if tempo_receivers_jaeger_grpc_enabled %}
    jaeger:
      protocols:
        grpc:
          endpoint: {{ tempo_receivers_jaeger_grpc_endpoint }}
{% endif %}
{% if tempo_receivers_jaeger_thrift_http_enabled %}
        thrift_http:
          endpoint: {{ tempo_receivers_jaeger_thrift_http_endpoint }}
{% endif %}
{% if tempo_receivers_zipkin_enabled %}
    zipkin:
      endpoint: {{ tempo_receivers_zipkin_endpoint }}
{% endif %}

ingester:
  trace_idle_period: 10s
  max_block_bytes: 1_000_000
  max_block_duration: 5m

compactor:
  compaction:
    block_retention: 1h

storage:
  trace:
    backend: local
    wal:
      path: {{ tempo_storage_wal_path }}
    local:
      path: {{ tempo_storage_path }}
    pool:
      max_workers: 100
      queue_depth: 10000

overrides:
  per_tenant_override_config: /etc/tempo/overrides.yaml
  per_tenant_override_period: 10s

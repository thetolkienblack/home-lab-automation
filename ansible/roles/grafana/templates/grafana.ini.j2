# Grafana configuration file
# Generated by Ansible

[paths]
data = {{ grafana_data_dir }}
logs = {{ grafana_logs_dir }}
plugins = {{ grafana_plugins_dir }}
provisioning = {{ grafana_provisioning_dir }}

[server]
protocol = {{ grafana_server_protocol }}
http_addr = {{ grafana_server_http_addr }}
http_port = {{ grafana_server_http_port }}
domain = {{ grafana_server_domain }}
root_url = {{ grafana_server_root_url }}
serve_from_sub_path = {{ grafana_server_serve_from_sub_path | lower }}
enable_gzip = {{ grafana_server_enable_gzip | lower }}
{% if grafana_server_cert_file %}
cert_file = {{ grafana_server_cert_file }}
{% endif %}
{% if grafana_server_cert_key %}
cert_key = {{ grafana_server_cert_key }}
{% endif %}

[database]
type = {{ grafana_database_type }}
{% if grafana_database_type == 'sqlite3' %}
path = {{ grafana_database_path }}
{% else %}
host = {{ grafana_database_host }}
name = {{ grafana_database_name }}
user = {{ grafana_database_user }}
password = {{ grafana_database_password }}
ssl_mode = {{ grafana_database_ssl_mode }}
{% if grafana_database_ca_cert_path %}
ca_cert_path = {{ grafana_database_ca_cert_path }}
{% endif %}
{% if grafana_database_client_key_path %}
client_key_path = {{ grafana_database_client_key_path }}
{% endif %}
{% if grafana_database_client_cert_path %}
client_cert_path = {{ grafana_database_client_cert_path }}
{% endif %}
{% if grafana_database_server_cert_name %}
server_cert_name = {{ grafana_database_server_cert_name }}
{% endif %}
max_idle_conn = {{ grafana_database_max_idle_conn }}
max_open_conn = {{ grafana_database_max_open_conn }}
conn_max_lifetime = {{ grafana_database_conn_max_lifetime }}
{% endif %}

[security]
admin_user = {{ grafana_security_admin_user }}
admin_password = {{ grafana_security_admin_password }}
secret_key = {{ grafana_security_secret_key }}
login_remember_days = {{ grafana_security_login_remember_days }}
cookie_samesite = {{ grafana_security_cookie_samesite }}
allow_embedding = {{ grafana_security_allow_embedding | lower }}
cookie_secure = {{ grafana_security_cookie_secure | lower }}
strict_transport_security = {{ grafana_security_strict_transport_security | lower }}
x_content_type_options = {{ grafana_security_x_content_type_options | lower }}
x_xss_protection = {{ grafana_security_x_xss_protection | lower }}

[users]
allow_sign_up = {{ grafana_users_allow_sign_up | lower }}
allow_org_create = {{ grafana_users_allow_org_create | lower }}
auto_assign_org = {{ grafana_users_auto_assign_org | lower }}
auto_assign_org_id = {{ grafana_users_auto_assign_org_id }}
auto_assign_org_role = {{ grafana_users_auto_assign_org_role }}
default_theme = {{ grafana_users_default_theme }}

[auth]
disable_login_form = {{ grafana_auth_disable_login_form | lower }}
disable_signout_menu = {{ grafana_auth_disable_signout_menu | lower }}

[auth.basic]
enabled = {{ grafana_auth_basic_enabled | lower }}

[auth.anonymous]
enabled = {{ grafana_auth_anonymous_enabled | lower }}
{% if grafana_auth_anonymous_enabled %}
org_name = {{ grafana_auth_anonymous_org_name }}
org_role = {{ grafana_auth_anonymous_org_role }}
{% endif %}

{% if grafana_auth_ldap_enabled %}
[auth.ldap]
enabled = {{ grafana_auth_ldap_enabled | lower }}
config_file = {{ grafana_auth_ldap_config_file }}
allow_sign_up = true
{% endif %}

[session]
provider = {{ grafana_session_provider }}
provider_config = {{ grafana_session_provider_config }}
cookie_name = {{ grafana_session_cookie_name }}
cookie_secure = {{ grafana_session_cookie_secure | lower }}
session_life_time = {{ grafana_session_session_life_time }}

[alerting]
enabled = {{ grafana_alerting_enabled | lower }}
execute_alerts = {{ grafana_alerting_execute_alerts | lower }}

[unified_alerting]
enabled = {{ grafana_unified_alerting_enabled | lower }}

[smtp]
enabled = {{ grafana_smtp_enabled | lower }}
{% if grafana_smtp_enabled %}
host = {{ grafana_smtp_host }}
user = {{ grafana_smtp_user }}
password = {{ grafana_smtp_password | default('') }}
cert_file = {{ grafana_smtp_cert_file }}
key_file = {{ grafana_smtp_key_file }}
skip_verify = {{ grafana_smtp_skip_verify | lower }}
from_address = {{ grafana_smtp_from_address }}
from_name = {{ grafana_smtp_from_name }}
ehlo_identity = {{ grafana_smtp_ehlo_identity }}
{% endif %}

[log]
mode = {{ grafana_log_mode }}
level = {{ grafana_log_level }}
{% if grafana_log_filters %}
filters = {{ grafana_log_filters }}
{% endif %}
